<!DOCTYPE html>

<html lang="ja">

<head>

<meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>Hiragana Row Game</title>

<style>

body {

  font-family: "Hiragino Kaku Gothic Pro","Meiryo",sans-serif;

  background:#fff;

  display:flex;

  justify-content:center;

  padding:40px;

}

.card {

  background:white;

  border-radius:20px;

  padding:30px;

  width:360px;

  box-shadow:0 10px 25px rgba(0,0,0,.1);

  text-align:center;

}

h1 {

  color:#b23b3b;

  margin-bottom:10px;

}

.progress {

  color:#666;

  margin-bottom:20px;

}

.slots {

  display:flex;

  justify-content:center;

  gap:12px;

  margin-bottom:20px;

}

.slot {

  width:60px;

  height:80px;

  border:3px solid #b23b3b;

  border-radius:14px;

  display:flex;

  flex-direction:column;

  justify-content:center;

  cursor:pointer;

}

.slot.active {

  background:#ffecec;

}

.romaji {

  font-size:14px;

  color:#999;

}

.kana {

  font-size:28px;

}

.choices {

  display:grid;

  grid-template-columns:repeat(5,1fr);

  gap:10px;

  margin-bottom:20px;

}

.choice {

  border:2px solid #b23b3b;

  border-radius:12px;

  padding:10px;

  font-size:22px;

  cursor:pointer;

  background:#fff;

}

.choice:hover {

  background:#ffecec;

}

button {

  padding:12px 24px;

  font-size:18px;

  border-radius:14px;

  border:none;

  background:#ccc;

  color:white;

}

button.enabled {

  background:#b23b3b;

  cursor:pointer;

}

</style>

</head>

<body>

<div class="card">

  <h1>Hiragana Quiz</h1>

  <div class="progress" id="progress"></div>

  <div class="slots" id="slots"></div>

  <div class="choices" id="choices"></div>

  <button id="nextBtn">Next Row</button>

</div>

<script>

/* ===== DATA ===== */

const rows = [
  { name:"a-row", items:[
    {r:"a",k:"ã‚"},{r:"i",k:"ã„"},{r:"u",k:"ã†"},{r:"e",k:"ãˆ"},{r:"o",k:"ãŠ"}
  ]},

  { name:"ka-row", items:[
    {r:"ka",k:"ã‹"},{r:"ki",k:"ã"},{r:"ku",k:"ã"},{r:"ke",k:"ã‘"},{r:"ko",k:"ã“"}
  ]},

  { name:"ga-row", items:[
    {r:"ga",k:"ãŒ"},{r:"gi",k:"ãŽ"},{r:"gu",k:"ã"},{r:"ge",k:"ã’"},{r:"go",k:"ã”"}
  ]},

  { name:"sa-row", items:[
    {r:"sa",k:"ã•"},{r:"shi",k:"ã—"},{r:"su",k:"ã™"},{r:"se",k:"ã›"},{r:"so",k:"ã"}
  ]},

  { name:"za-row", items:[
    {r:"za",k:"ã–"},{r:"ji",k:"ã˜"},{r:"zu",k:"ãš"},{r:"ze",k:"ãœ"},{r:"zo",k:"ãž"}
  ]},

  { name:"ta-row", items:[
    {r:"ta",k:"ãŸ"},{r:"chi",k:"ã¡"},{r:"tsu",k:"ã¤"},{r:"te",k:"ã¦"},{r:"to",k:"ã¨"}
  ]},

  { name:"da-row", items:[
    {r:"da",k:"ã "},{r:"dzu",k:"ã¥"},{r:"de",k:"ã§"},{r:"do",k:"ã©"}
  ]},

  { name:"na-row", items:[
    {r:"na",k:"ãª"},{r:"ni",k:"ã«"},{r:"nu",k:"ã¬"},{r:"ne",k:"ã­"},{r:"no",k:"ã®"}
  ]},

  { name:"ha-row", items:[
    {r:"ha",k:"ã¯"},{r:"hi",k:"ã²"},{r:"fu",k:"ãµ"},{r:"he",k:"ã¸"},{r:"ho",k:"ã»"}
  ]},

  { name:"ba-row", items:[
    {r:"ba",k:"ã°"},{r:"bi",k:"ã³"},{r:"bu",k:"ã¶"},{r:"be",k:"ã¹"},{r:"bo",k:"ã¼"}
  ]},

  { name:"pa-row", items:[
    {r:"pa",k:"ã±"},{r:"pi",k:"ã´"},{r:"pu",k:"ã·"},{r:"pe",k:"ãº"},{r:"po",k:"ã½"}
  ]},

  { name:"ma-row", items:[
    {r:"ma",k:"ã¾"},{r:"mi",k:"ã¿"},{r:"mu",k:"ã‚€"},{r:"me",k:"ã‚"},{r:"mo",k:"ã‚‚"}
  ]},

  { name:"ya-row", items:[
    {r:"ya",k:"ã‚„"},{r:"yu",k:"ã‚†"},{r:"yo",k:"ã‚ˆ"}
  ]},

  { name:"ra-row", items:[
    {r:"ra",k:"ã‚‰"},{r:"ri",k:"ã‚Š"},{r:"ru",k:"ã‚‹"},{r:"re",k:"ã‚Œ"},{r:"ro",k:"ã‚"}
  ]},

  { name:"wa-row", items:[
    {r:"wa",k:"ã‚"},{r:"wo",k:"ã‚’"}
  ]},

  { name:"n", items:[
    {r:"n",k:"ã‚“"}
  ]},

  { name:"ãã‚ƒ-row (yÅon)", items:[
    {r:"kya",k:"ãã‚ƒ"},{r:"kyu",k:"ãã‚…"},{r:"kyo",k:"ãã‚‡"}
  ]},

  { name:"ãŽã‚ƒ-row (yÅon)", items:[
    {r:"gya",k:"ãŽã‚ƒ"},{r:"gyu",k:"ãŽã‚…"},{r:"gyo",k:"ãŽã‚‡"}
  ]},
  { name:"ã—ã‚ƒ-row (yÅon)", items:[
  {r:"sha",k:"ã—ã‚ƒ"},{r:"shu",k:"ã—ã‚…"},{r:"sho",k:"ã—ã‚‡"}
]},

{ name:"ã¡ã‚ƒ-row (yÅon)", items:[
  {r:"cha",k:"ã¡ã‚ƒ"},{r:"chu",k:"ã¡ã‚…"},{r:"cho",k:"ã¡ã‚‡"}
]},

{ name:"ã«ã‚ƒ-row (yÅon)", items:[
  {r:"nya",k:"ã«ã‚ƒ"},{r:"nyu",k:"ã«ã‚…"},{r:"nyo",k:"ã«ã‚‡"}
]},

{ name:"ã²ã‚ƒ-row (yÅon)", items:[
  {r:"hya",k:"ã²ã‚ƒ"},{r:"hyu",k:"ã²ã‚…"},{r:"hyo",k:"ã²ã‚‡"}
]},

{ name:"ã¿ã‚ƒ-row (yÅon)", items:[
  {r:"mya",k:"ã¿ã‚ƒ"},{r:"myu",k:"ã¿ã‚…"},{r:"myo",k:"ã¿ã‚‡"}
]},

{ name:"ã‚Šã‚ƒ-row (yÅon)", items:[
  {r:"rya",k:"ã‚Šã‚ƒ"},{r:"ryu",k:"ã‚Šã‚…"},{r:"ryo",k:"ã‚Šã‚‡"}
]},

{ name:"ã³ã‚ƒ-row (yÅon)", items:[
  {r:"bya",k:"ã³ã‚ƒ"},{r:"byu",k:"ã³ã‚…"},{r:"byo",k:"ã³ã‚‡"}
]},

{ name:"ã´ã‚ƒ-row (yÅon)", items:[
  {r:"pya",k:"ã´ã‚ƒ"},{r:"pyu",k:"ã´ã‚…"},{r:"pyo",k:"ã´ã‚‡"}
]},

{ name:"ã˜ã‚ƒ-row (yÅon)", items:[
  {r:"ja",k:"ã˜ã‚ƒ"},{r:"ju",k:"ã˜ã‚…"},{r:"jo",k:"ã˜ã‚‡"}
]}

];


    

   

 /* ===== ALL KANA POOL ===== */

const allKana = [

"ã‚","ã„","ã†","ãˆ","ãŠ",

"ã‹","ã","ã","ã‘","ã“",

"ãŒ","ãŽ","ã","ã’","ã”",

"ã•","ã—","ã™","ã›","ã",

"ã–","ã˜","ãš","ãœ","ãž",

"ãŸ","ã¡","ã¤","ã¦","ã¨",

"ã ","ã¢","ã¥","ã§","ã©",

"ãª","ã«","ã¬","ã­","ã®",

"ã¯","ã²","ãµ","ã¸","ã»",

"ã°","ã³","ã¶","ã¹","ã¼",

"ã±","ã´","ã·","ãº","ã½",
  
"ã¾","ã¿","ã‚€","ã‚","ã‚‚",

"ã‚„","ã‚†","ã‚ˆ",
  
"ã‚‰","ã‚Š","ã‚‹","ã‚Œ","ã‚",

"ãã‚ƒ","ãã‚…","ãã‚‡",
  
"ãŽã‚ƒ","ãŽã‚…","ãŽã‚‡",
  
"ã—ã‚ƒ","ã—ã‚…","ã—ã‚‡",
  
"ã˜ã‚ƒ","ã˜ã‚…","ã˜ã‚‡",
  
"ã¡ã‚ƒ","ã¡ã‚…","ã¡ã‚‡",
  
"ã‚Šã‚ƒ","ã‚Šã‚…","ã‚Šã‚‡",
  
"ã«ã‚ƒ","ã«ã‚…","ã«ã‚‡",
  
"ã¿ã‚ƒ","ã¿ã‚…","ã¿ã‚‡",
  
"ã²ã‚ƒ","ã²ã‚…","ã²ã‚‡",
  
"ã³ã‚ƒ","ã³ã‚…","ã³ã‚‡",
  
"ã´ã‚ƒ","ã´ã‚…","ã´ã‚‡",
  
"ã‚", "ã‚’", "ã‚“"

];

/* ===== GAME STATE ===== */

let rowIndex = 0;

let activeSlot = null;
let mistakes = new Set();   // stores kana answered incorrectly

/* ===== ELEMENTS ===== */

const slotsDiv = document.getElementById("slots");

const choicesDiv = document.getElementById("choices");

const progress = document.getElementById("progress");

const nextBtn = document.getElementById("nextBtn");

/* ===== FUNCTIONS ===== */

function loadRow() {

  slotsDiv.innerHTML = "";

  choicesDiv.innerHTML = "";

  nextBtn.classList.remove("enabled");

  const row = rows[rowIndex];

  progress.textContent = `${row.name} (${rowIndex+1}/${rows.length})`;

  row.items.forEach((item,i)=>{

    const slot = document.createElement("div");

    slot.className="slot";

    slot.dataset.answer = item.k;

    slot.innerHTML = `<div class="romaji">${item.r}</div><div class="kana"></div>`;

    slot.onclick = ()=>{

      document.querySelectorAll(".slot").forEach(s=>s.classList.remove("active"));

      slot.classList.add("active");

      activeSlot = slot;

      showChoices();

    };

    slotsDiv.appendChild(slot);

  });

}

function showChoices() {

  choicesDiv.innerHTML = "";

  // make a shuffled COPY (do not touch original order)

  const shuffledKana = [...allKana].sort(() => Math.random() - 0.5);

  shuffledKana.forEach(k => {

    const btn = document.createElement("div");

    btn.className = "choice";

    btn.textContent = k;

    btn.onclick = () => selectKana(k);

    choicesDiv.appendChild(btn);

  });

}





function selectKana(kana) {
  if(!activeSlot) return;

  if(kana === activeSlot.dataset.answer) {
    activeSlot.querySelector(".kana").textContent = kana;
    activeSlot.classList.remove("active");
    activeSlot = null;
    checkComplete();
  } else {
    // âŒ wrong answer â†’ track mistake
    mistakes.add(activeSlot.dataset.answer);

    // small feedback (optional)
    activeSlot.classList.remove("active");
    activeSlot = null;
  }
}


function checkComplete() {

  const done = [...document.querySelectorAll(".slot")]

    .every(s=>s.querySelector(".kana").textContent);

  if(done) {

    nextBtn.classList.add("enabled");

  }

}

nextBtn.onclick = ()=>{

  if(!nextBtn.classList.contains("enabled")) return;

  rowIndex++;

  if(rowIndex < rows.length) loadRow();

  else showResults();


};

/* ===== START ===== */

loadRow();
function showResults() {
  document.querySelector(".card").innerHTML = `
    <h1>Finished!</h1>
    ${
      mistakes.size === 0
      ? "<p>ðŸŽ‰ Perfect! No mistakes!</p>"
      : `<p>You need to work on these characters:</p>
         <div style="font-size:26px; margin-top:10px;">
           ${[...mistakes].join(" ãƒ» ")}
         </div>`
    }
  `;
}

</script>

</body>

</html>
